# Что это

`REST` (Representational State Transfer — «передача состояния представления») - это архитектурный стиль взаимодействия компонентов распределённой системы. Определяет такие понятия, как ресурсы, представление для ресурсов, идентификатор ресурсов, а также описывает требования к взаимодействию (кеширование, связанность).

HTTP-протокол идеально подходит для применения данной архитектуры.


## Сущности

В архитектуре REST все действия, которые совершает фронтенд, направлены на работу с сущностями. 

Сущность — это любой объект бизнес-логики, с которым работает приложение. Пользователь, сообщение, аватарка, товар, категория товара, любой объект реального мира — это ресурсы в REST.


### Идентификаторы сущностей

Для этого фронтенду нужно знать, как отличать одни ресурсы от других, и для этой цели служат идентификаторы — уникальные значения, которые есть у каждого ресурса, зачастую обозначающиеся полем id.


### Действия с сущностями

Работа любого приложения так или иначе сводится к манипуляции данными, и REST эти манипуляции стандартизирует, определяя, что можно делать с сущностями:
- создавать,
- получать,
- обновлять,
- удалять.

В эти категории плохо укладываются бизнес-действия, такие как, например, «выплатить сотрудникам зарплату» — придётся придумывать сущности для этого действия и создавать их. Иногда это бывает излишней сложностью, из-за которой от REST отказываются, если приложение богато сложной бизнес-логикой.


## Запросы

Действия с ресурсами перекладываются на HTTP с помощью методов запросов — каждому действию соответствует свой метод.
Адреса запросов в REST формируются по принципу `/ресурс(/id(/ресурс...)?)?` - endpoint;


### Идемпотентность

Так называется свойство, при котором повторный запрос даёт тот же результат, что и первый. Оно не является свойством по умолчанию и не гарантируется сервером, то есть появляется как результат реализации запроса. 

Она про то, что идемпотентные запросы не должны менять состояние ресурсов на сервере. Бэкэнд-разработчики должны быть осведомлены об этом и не нарушать это свойство.

Идемпотентные методы не имеют побочных эффектов, то есть если сделать идентичный GET-запрос несколько раз подряд, то эффект будет одинаковым.

Идемпотентные методы:
- GET,
- OPTIONS,
- HEAD,
- PUT,
- DELETE.
  
Методы POST и PATCH — не идемпотентны.


### Семантика

###### GET

Получает состояние ресурса в одном из представлений (JSON, XML, HTML), не содержит тела.


####  POST

Предназначен для создания новой сущности. Может создавать коллекцию сущностей. Содержит тело.


#### DELETE

Удаляет существующий ресурс, не содержит тела.


#### Отличия PATCH / PUT // TODO


#### HEAD

Запрашивает заголовки, чтобы проверить существование ресурса, не содержит тела.


### Лучшие практики в REST

- Используйте path, а не query:
  - // Неправильно: /api?type=chats&id=123
  - // Правильно: /api/chats/123 

- Используйте в названиях множественное число
    - // Неправильно: /api/chat/123
    - // Правильно: /api/chats/123 
  
- Используйте только существительные.
В HTTP методы отвечают за действия. Глагол здесь — избыточная информация:
    - Неправильно: POST /api/chats/add
    - Правильно: POST /api/chats

- Используйте короткие имена:
    - Неправильно: /api/chat_list
    - Правильно: /api/chats
  
- Используйте строчные буквы. Это общепринятая форма отображения URL в браузере, даже если в проекте на JavaScript принят camelCase:
    - Неправильно: /api/pullRequest
    - Правильно: /api/pull-request
  
- Вложенность лучше параметров:
    - Неправильно: /api/messages?chat_id=213
    - Правильно: /api/chats/123/messages 

