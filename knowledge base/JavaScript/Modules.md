В современном JS есть два основых типа модулей: CommonJS (стандарт для NodeJS) и ESM, которые были приняты как стндарт для ECMAscript и вынесены в спецификацию.

##### ES Modules

Особенностью этих модулей является использование `import / export`, а также динамические импорты.
Использовать ESM в HTML можно как:
```
<script type="module" src="main.js"></script>
```
Однако импорты в таких подулях преобразуются из таких:
```
./dist/module1
```
в такие:
```
/dist/module1
```
Это делает непригодным использование ESM нигде, кроме разве что импортов вебпака.

##### CommonJS

Для импорта и экспорта используются `module.exports / require`.


##### Работа с модулями в NodeJS

С 13 версии поддерживается ESM.

Все пути, начинающиеся с `/`, обрабатываются как обсолютные, а те, что начинаются с `./`, - как относительные с корнем в папке проекта.

Для остальных случаев NodeJS начинает поиск модулей с папки `node_modules`. Если в ней модуль не находится, то поиск поднимается на уровень выше и так до корня ФС:
```
/home/work/projectN/node_modules
/home/work/node_modules
/home/node_modules
/node_modules
```

Если же и там не нашлось нужного модуля, то поиск продолжается по `GLOBAL_FOLDERS`, которые были добавлены через переменную окружения `NODE_MODULES`. Получить эти пути можно, выполнив команду:
```
require.resolve.paths('moduleName')
```


##### Свойства module

У module есть дополнительные свойства:
- id - уникальный идентификатор модуля
- children - объект, содержащий модули, которые были импортированы в текущем файле

##### Свойства require

- cache - это объект, который содержит информацию о каждом импортированном модуле. Если оттуда удалить запись, то модуль будет импортироваться заново:

```
delete require.cache['./modulePath/index.js'];
```



https://habr.com/ru/companies/domclick/articles/532084/

